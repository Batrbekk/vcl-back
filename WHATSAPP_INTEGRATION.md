# WhatsApp –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ VCL-Back

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WhatsApp Web, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å —Å–≤–æ–∏ WhatsApp –∞–∫–∫–∞—É–Ω—Ç—ã –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ WhatsApp.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **QR-–∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR-–∫–æ–¥ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è WhatsApp  
‚úÖ **–ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å** - –ö–∞–∂–¥–∞—è –∫–æ–º–ø–∞–Ω–∏—è –∏–º–µ–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏  
‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∏—Ö –ø—Ä–∞–≤–∞  
‚úÖ **–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è** - WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö  
‚úÖ **–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —á–∞—Ç–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤  

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä ‚îÇ    ‚îÇ WhatsApp Session ‚îÇ    ‚îÇ   –ú–µ–Ω–µ–¥–∂–µ—Ä—ã    ‚îÇ
‚îÇ                 ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ     Manager      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                ‚îÇ
‚îÇ  QR –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚îÇ    ‚îÇ                  ‚îÇ    ‚îÇ –ß—Ç–µ–Ω–∏–µ/–ó–∞–ø–∏—Å—å  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                   ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ –ß–∞—Ç—ã   ‚îÇ        ‚îÇ –°–æ–æ–±—â–µ–Ω–∏—è ‚îÇ
                ‚îÇ (–ë–î)   ‚îÇ        ‚îÇ   (–ë–î)    ‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### WhatsAppSession
- –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Å—Å–∏—è WhatsApp –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏
- –•—Ä–∞–Ω–∏—Ç QR-–∫–æ–¥, —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ

### WhatsAppManagerAccess  
- –î–æ—Å—Ç—É–ø –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∫ —Å–µ—Å—Å–∏—è–º
- –ü—Ä–∞–≤–∞: canRead, canWrite, canManageChats

### WhatsAppChat
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–∞–∫—Ç–µ, –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Å—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö

### WhatsAppMessage
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–æ–≤
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å, –≤—Ä–µ–º—è, —Ç–∏–ø, —Å—Ç–∞—Ç—É—Å –ø—Ä–æ—á—Ç–µ–Ω–∏—è

## API Endpoints

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
```http
POST /api/whatsapp/sessions
Authorization: Bearer <jwt_token>
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ QR-–∫–æ–¥–∞
```http
GET /api/whatsapp/sessions/{sessionId}/qr
Authorization: Bearer <jwt_token>
```

#### –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π –∫–æ–º–ø–∞–Ω–∏–∏
```http
GET /api/whatsapp/sessions
Authorization: Bearer <jwt_token>
```

#### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
```http
POST /api/whatsapp/sessions/{sessionId}/disconnect
Authorization: Bearer <jwt_token>
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º

#### –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
```http
POST /api/whatsapp/sessions/{sessionId}/access
Authorization: Bearer <jwt_token>
Content-Type: application/json

{
  "managerId": "manager_id",
  "canRead": true,
  "canWrite": true,
  "canManageChats": false
}
```

#### –û—Ç–∑—ã–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
```http
DELETE /api/whatsapp/sessions/{sessionId}/access/{managerId}
Authorization: Bearer <jwt_token>
```

### –†–∞–±–æ—Ç–∞ —Å —á–∞—Ç–∞–º–∏

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤
```http
GET /api/whatsapp/sessions/{sessionId}/chats?page=1&limit=50
Authorization: Bearer <jwt_token>
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
```http
GET /api/whatsapp/sessions/{sessionId}/chats/{chatId}/messages?page=1&limit=50
Authorization: Bearer <jwt_token>
```

#### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
```http
POST /api/whatsapp/sessions/{sessionId}/chats/{chatId}/send
Authorization: Bearer <jwt_token>
Content-Type: application/json

{
  "message": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ WhatsApp –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏
```http
GET /api/whatsapp/stats
Authorization: Bearer <jwt_token>
```

## WebSocket –°–æ–±—ã—Ç–∏—è

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è (–æ—Ç —Å–µ—Ä–≤–µ—Ä–∞)

#### QR-–∫–æ–¥ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```javascript
socket.on('whatsapp:qr', (data) => {
  console.log('QR –∫–æ–¥:', data.qrCode); // base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  console.log('–°–µ—Å—Å–∏—è:', data.sessionId);
});
```

#### –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```javascript
socket.on('whatsapp:ready', (data) => {
  console.log('WhatsApp –ø–æ–¥–∫–ª—é—á–µ–Ω:', data.phoneNumber);
  console.log('–ò–º—è –∞–∫–∫–∞—É–Ω—Ç–∞:', data.displayName);
});
```

#### –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
```javascript
socket.on('whatsapp:message', (data) => {
  console.log('–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:', data.message);
  console.log('–ß–∞—Ç:', data.chatId);
});
```

#### –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
```javascript
socket.on('whatsapp:message_sent', (data) => {
  console.log('–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:', data.message);
});
```

#### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ
```javascript
socket.on('whatsapp:disconnected', (data) => {
  console.log('WhatsApp –æ—Ç–∫–ª—é—á–µ–Ω:', data.reason);
});
```

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WhatsApp (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)

```javascript
// 1. –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é
const response = await fetch('/api/whatsapp/sessions', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  }
});

const { data } = await response.json();
const sessionId = data.sessionId;

// 2. –ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥
const qrResponse = await fetch(`/api/whatsapp/sessions/${sessionId}/qr`, {
  headers: { 'Authorization': `Bearer ${token}` }
});

const qrData = await qrResponse.json();
if (qrData.data.qrCode) {
  // –ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  displayQRCode(qrData.data.qrCode);
}

// 3. –°–ª—É—à–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
socket.on('whatsapp:ready', (data) => {
  console.log(`WhatsApp –ø–æ–¥–∫–ª—é—á–µ–Ω: ${data.phoneNumber}`);
  // –°–∫—Ä—ã—Ç—å QR-–∫–æ–¥, –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
});
```

### 2. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É

```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
const managers = await fetch('/api/managers', {
  headers: { 'Authorization': `Bearer ${token}` }
});

// –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –º–µ–Ω–µ–¥–∂–µ—Ä—É
await fetch(`/api/whatsapp/sessions/${sessionId}/access`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    managerId: 'manager_id',
    canRead: true,
    canWrite: true,
    canManageChats: false
  })
});
```

### 3. –†–∞–±–æ—Ç–∞ —Å —á–∞—Ç–∞–º–∏ (–ú–µ–Ω–µ–¥–∂–µ—Ä)

```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
const chats = await fetch(`/api/whatsapp/sessions/${sessionId}/chats`, {
  headers: { 'Authorization': `Bearer ${managerToken}` }
});

// –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
const messages = await fetch(`/api/whatsapp/sessions/${sessionId}/chats/${chatId}/messages`, {
  headers: { 'Authorization': `Bearer ${managerToken}` }
});

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
await fetch(`/api/whatsapp/sessions/${sessionId}/chats/${chatId}/send`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${managerToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    message: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ö–∞–∫ –¥–µ–ª–∞?'
  })
});

// –°–ª—É—à–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
socket.on('whatsapp:message', (data) => {
  if (data.chatId === currentChatId) {
    // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞
    addMessageToChat(data.message);
  }
});
```

## –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (admin)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ WhatsApp —Å–µ—Å—Å–∏–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ QR-–∫–æ–¥–æ–≤ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏  
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –ú–µ–Ω–µ–¥–∂–µ—Ä (manager)
- ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —á–∞—Ç–æ–≤ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ—Å—Ç—É–ø–∞ canRead)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ—Å—Ç—É–ø–∞ canWrite)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ—Å—Ç—É–ø–∞ canManageChats)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ò–∑–æ–ª—è—Ü–∏—è –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º** - –ö–∞–∂–¥–∞—è –∫–æ–º–ø–∞–Ω–∏—è –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–µ—Å—Å–∏–∏
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** - –ú–µ–Ω–µ–¥–∂–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏  
3. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ª–æ–≥–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
[WhatsApp] –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ cm123
[WhatsApp] –°–µ—Å—Å–∏—è cm456 —Å–æ–∑–¥–∞–Ω–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
[WhatsApp] QR –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω –¥–ª—è —Å–µ—Å—Å–∏–∏ cm456
[WhatsApp] –°–µ—Å—Å–∏—è cm456 —É—Å–ø–µ—à–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ 1234567890

# –°–æ–æ–±—â–µ–Ω–∏—è
[WhatsApp] –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Å–µ—Å—Å–∏–∏ cm456: –ü—Ä–∏–≤–µ—Ç!
[WhatsApp] –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è —Å–µ—Å—Å–∏–∏ cm456: –ö–∞–∫ –¥–µ–ª–∞?
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Ç–æ–≤  
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ 30 –¥–Ω–µ–π
- –í—Ö–æ–¥—è—â–∏–µ/–∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–û–¥–Ω–∞ —Å–µ—Å—Å–∏—è –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—é** - –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω WhatsApp –∞–∫–∫–∞—É–Ω—Ç
2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç WhatsApp Web** - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ WhatsApp –º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
3. **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É** - Puppeteer —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Chrome/Chromium
4. **–§–∞–π–ª—ã —Å–µ—Å—Å–∏–π** - –•—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –ø–∞–ø–∫–µ `.whatsapp-sessions`

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+ 
- Chrome/Chromium (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å Puppeteer)
- PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.

### Docker
–ü—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –≤ Docker –¥–æ–±–∞–≤–∏—Ç—å –≤ Dockerfile:
```dockerfile
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è Puppeteer  
RUN apt-get update && apt-get install -y \
    chromium-browser \
    --no-install-recommends \
    && rm -rf /var/lib/apt/lists/*

ENV CHROME_BIN=/usr/bin/chromium-browser
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### –ü—Ä–æ–±–ª–µ–º—ã —Å QR-–∫–æ–¥–æ–º
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Puppeteer –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –°–µ—Å—Å–∏—è –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- –£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É `.whatsapp-sessions/{sessionId}` 
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–æ–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (—Ñ–æ—Ä–º–∞—Ç: –Ω–æ–º–µ—Ä@c.us)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ 